<html>
	<head>
		<style>
			html,body
			{
				margin: 0;
				height: 100%;

			}
			#c
			{

				height: 100%;
				width:100%;
				display: block;
			}

		</style>
	</head>
	<body> 
		<canvas id="c"></canvas>	
		<script type="module">
		import * as THREE from './resources/threejs/three.module.js';
		import {OrbitControls} from 'https://threejsfundamentals.org/threejs/resources/threejs/r110/examples/jsm/controls/OrbitControls.js';
		import {TrackballControls} from 'https://threejsfundamentals.org/threejs/resources/threejs/r110/examples/jsm/controls/TrackballControls.js';

		import {OBJLoader2} from 'https://threejsfundamentals.org/threejs/resources/threejs/r110/examples/jsm/loaders/OBJLoader2.js';

		function main()
		{
			const canvas = document.querySelector('#c');
			const renderer = new THREE.WebGLRenderer({canvas});

			
			const fov = 75;
			const aspect = 2;
			const near = 0.1;
			const far = 150;
			
			var CamX=0,camY=6,camZ=25;
			
			const camera = new THREE.PerspectiveCamera(fov, aspect, near, far);
			camera.position.set(CamX,camY,camZ);
			
			const scene = new THREE.Scene();
			

			
			
			const greenMaterial = new THREE.MeshPhongMaterial({color: 0x004E00});
			const brownMaterial = new THREE.MeshPhongMaterial({color: 0xA66829});
			const yellowMaterial = new THREE.MeshPhongMaterial({color: 0xF59B00});


			//duck geometry
	

			const DuckHead = new THREE.BoxGeometry(2,2,2);
			const DuckHeadMesh = new THREE.Mesh(DuckHead,greenMaterial);
			//DuckHeadMesh.position.set(duckX-2,duckY+2.5,duckZ);
			//DuckHeadMesh.updateMatrix();

			const DuckBody = new THREE.BoxGeometry(4,3,3);
			const DuckBodyMesh = new THREE.Mesh(DuckBody,brownMaterial);
			//DuckBodyMesh.position.set(duckX,duckY,duckZ);
			//DuckBodyMesh.updateMatrix();

			const DuckBeak = new THREE.BoxGeometry(2.5,0.5,1);
			const DuckBeakMesh = new THREE.Mesh(DuckBeak,yellowMaterial);
			//DuckBeakMesh.position.set(duckX-3,duckY+2.3,duckZ);
			//DuckBeakMesh.updateMatrix();


			/*function makeDuckInstance(DuckHead, DuckBody, DuckBeak, Headmaterial, Bodymaterial, Beakmaterial,x,y,z)
              		{
                		const DuckHeadMesh = new THREE.Mesh(DuckHead, Headmaterial);
                		const DuckBodyMesh = new THREE.Mesh(DuckBody, Bodymaterial);
                		const DuckBeakMesh = new THREE.Mesh(DuckBeak, Beakmaterial);
                		scene.add(DuckHeadMesh,DuckBodyMesh,DuckBeakMesh);
                		DuckHeadMesh.position.x = x-2;
						DuckHeadMesh.position.y = y+1;
						DuckHeadMesh.position.z = z;
						DuckBeakMesh.position.x = x-3;
						DuckBeakMesh.position.y = y+0.6;
						DuckBeakMesh.position.z = z;
						DuckBodyMesh.position.x = x;
						DuckBodyMesh.position.y = y-1.5;
						DuckBodyMesh.position.z = z;
						
						
						return DuckBodyMesh;

	               }
			const Ducks = 
              		[
                		makeDuckInstance(DuckHead, DuckBody, DuckBeak, greenMaterial,brownMaterial, yellowMaterial, 11,21.5,-10),
						makeDuckInstance(DuckHead,DuckBody, DuckBeak, brownMaterial, greenMaterial,yellowMaterial, 1,23.5,-10),
						makeDuckInstance(DuckHead,DuckBody, DuckBeak, brownMaterial, greenMaterial,yellowMaterial, -11,20.5,-10),
              		];
			*/
			
	
			//scene.add(square);
			const geometry = new THREE.BoxGeometry(5,5,5);	   

			function makeInstance(geometry, color, x,y)
			{
				const material = new THREE.MeshPhongMaterial({color});
				const cube = new THREE.Mesh(geometry,material);
				scene.add(cube);
				cube.position.x = x;
				cube.position.y = y+15;
				cube.position.z = -10;

				return cube;
			}

			const cubes = 
			[
				makeInstance(geometry, 0x44aa88,-40,5),
				makeInstance(geometry, 0x8844aa,-50,0),
				makeInstance(geometry, 0xaa8844,-35,10),

			];
		





			







			
			
			
			
			
			
			
			scene.background = new THREE.Color('lightblue');
			{
				const color = 0xFFFFFF;
				const intensity = 1;
				const light = new THREE.DirectionalLight(color,intensity);
				light.position.set(-1,2,2);
				scene.add(light);
			}
			{
    			const planeSize = 40;

    			const loader = new THREE.TextureLoader();
    			const texture = loader.load('https://threejsfundamentals.org/threejs/resources/images/checker.png');
    			texture.wrapS = THREE.RepeatWrapping;
    			texture.wrapT = THREE.RepeatWrapping;
    			texture.magFilter = THREE.NearestFilter;
    			const repeats = planeSize / 2;
    			texture.repeat.set(repeats, repeats);

    			const planeGeo = new THREE.PlaneBufferGeometry(planeSize*2, planeSize);
    			const planeMat = new THREE.MeshPhongMaterial
				({
      				map: texture,
      				side: THREE.DoubleSide,
    			});
    			const mesh = new THREE.Mesh(planeGeo, planeMat);
    			mesh.rotation.x = Math.PI * -.5;
    			scene.add(mesh);
  			}
			const controls = new OrbitControls(camera, canvas);
			//controls.target.set(0,0,0);
			controls.target.set(0,5,0);

			controls.update();


			
			
			 
			
			 



			function resizeRendererToDisplaySize(renderer) 
			{
                const canvas = renderer.domElement;
                const width = canvas.clientWidth;
                const height = canvas.clientHeight;
                const needResize = canvas.width !== width || canvas.height !== height;
                if (needResize) {
                  renderer.setSize(width, height, false);
                }
                return needResize;
            }
            
			  function render(time,) 
			  {
				
				time *= 0.001;
				
				
				//cube.position.set.x = camX +=time*0.05;
				
				//camera.position.x += time ;

				cubes.forEach((cube,ndx)=>
				{
					const speed = 1 + ndx*0.1;
					const rot = time *speed;
					cube.position.x += 1+rot*0.5;
					//cube.rotation.x =rot;
					//cube.rotation.y =rot;
					while(cube.position.x > 50 )
					{
						cube.position.x += -100;
						ndx+= -1;
						//camera.position.x = -40;
						
					}



				});




                if (resizeRendererToDisplaySize(renderer)) {
                  const canvas = renderer.domElement;
                  camera.aspect = canvas.clientWidth / canvas.clientHeight;
                  camera.updateProjectionMatrix();
                }
            
                renderer.render(scene, camera);
            
                requestAnimationFrame(render);
              }
            
              requestAnimationFrame(render);
			  
            }
            
            main();

		

		</script>
	</body>
</html>
